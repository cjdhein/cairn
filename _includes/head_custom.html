    <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('h3, h2, h4').forEach(function(header) {
    const match = header.textContent.match(/die-roller:(d\d+)/i);
    console.log('Found header:', header.textContent, match);
    if (match) {
      const dieType = match[1];
      let next = header.nextElementSibling;
      while (next && next.tagName !== 'TABLE') next = next.nextElementSibling;
      if (next) {
        const button = document.createElement('button');
        button.className = 'roll-btn';
        button.textContent = `Roll ${dieType}`;
        const resultDiv = document.createElement('div');
        resultDiv.className = 'result';
        header.parentNode.insertBefore(button, next);
        header.parentNode.insertBefore(resultDiv, next);

        button.addEventListener('click', function() {
          const rows = next.querySelectorAll('tbody tr, tr');
          const dieNum = parseInt(dieType.replace('d', ''), 10);
          const rollIdx = Math.floor(Math.random() * dieNum);
          rows.forEach((row, idx) => row.classList.toggle('rolled', idx === rollIdx));
          const cells = rows[rollIdx].querySelectorAll('td, th');
          let result = Array.from(cells).map(cell => cell.textContent.trim()).join(' | ');
          resultDiv.textContent = `Rolled: ${rollIdx + 1} â†’ ${result}`;
        });
      }
    }
  });
});
    </script>